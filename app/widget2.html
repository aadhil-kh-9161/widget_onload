<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://live.zwidgets.com/js-sdk/1.2/ZohoEmbededAppSDK.min.js"></script>
    <title>Document</title>
</head>
<body>
    <!-- <button onclick="nextStateBluePrint()">Next State in Blueprint</button> -->
    <h1>sample populate data</h1>
</body>
<script>
    ZOHO.embeddedApp.on("PageLoad", async function (data) {
        console.log(data);
        // const header1 = document.createElement('h3'); 
        // const header2 = document.createElement('h3'); 
        // const header3 = document.createElement('h3'); 
        // const header4 = document.createElement('h3'); 
        // var currentEnv = await ZOHO.CRM.CONFIG.GetCurrentEnvironment();
        // header1.textContent = `Deployment : ${currentEnv.deployment}`;
        // header2.textContent = `ZGID : ${currentEnv.zgid}`;
        // header3.textContent = `ZUID : ${currentEnv.zuid}`;
        // header4.textContent = `Platform : ${currentEnv.platform || null}`
        // const divTag = document.createElement('div'); 
        // divTag.append(header1,header2,header3,header4)
        // document.body.appendChild(divTag);
        // ZOHO.CRM.UI.Record.edit({Entity:"Deals",RecordID:"1671226000001992203"})
        // .then(function(data){
        //     console.log(data)
        // })
        // var testy = await ZOHO.CRM.FUNCTIONS.execute("testpopulate", {})
        // ZOHO.CRM.UI.Record.populate({Description:JSON.parse(testy.details.output).title})
        // ZOHO.CRM.UI.Popup.close()
        // var data = [{
        //     "Company": "ZohoCorp",
        //     "First_Name": "Babu"
        // }, {
        //     "Company": "ZohoCorp",
        //     "First_Name": "Babu"
        // }];

        // ZOHO.CRM.API.insertRecord({Entity:"Leads",APIData:data,Trigger:["workflow"]}).then(function(data){
        //     console.log('inside then block');
        //     console.log(data);
        // }).catch(function(data){
        //     console.log('inside catch block');
        //     console.log(data);
        // });
        // var config={
        //   Entity:"Leads",
        //   APIData:{
        //         "id": data.EntityId[0],
        //         "Company": "Zylker"
        //   }
        // }
        // ZOHO.CRM.API.updateRecord(config)
        // .then(function(data){
        //     console.log(data)
        // })
        const rec = await ZOHO.CRM.API.getRecord({ Entity: data.Entity, approved: "both", RecordID:data.EntityId})
        console.log(rec);
    })
    // async function nextStateBluePrint() {
    //     await ZOHO.CRM.BLUEPRINT.proceed();
    //     console.log('test');
    // }
    ZOHO.embeddedApp.init();
</script>
</html>
